<mxfile host="app.diagrams.net" modified="2021-12-02T08:15:27.832Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.55 Safari/537.36" etag="JjJ6v2AI5q9e2kKwRcNB" version="15.8.8" type="github" pages="2">
  <diagram id="pvfjxKssG2yLpeZ6tbLy" name="Page-1">
    <mxGraphModel dx="1426" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="q_a1poV0XZRipHzOlyn--19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="vC7OHm0Ahw0lT4L49-nY-1" target="q_a1poV0XZRipHzOlyn--3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="vC7OHm0Ahw0lT4L49-nY-1" value="SQL" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="197" y="50" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--1" target="q_a1poV0XZRipHzOlyn--2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--1" value="通过工厂类:&lt;br&gt;InterpreterFactory构造&lt;br&gt;InterpreterSelectQuery" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="172" y="150" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--2" target="q_a1poV0XZRipHzOlyn--4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--2" target="q_a1poV0XZRipHzOlyn--22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--2" value="Optimize" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="276.25" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--3" target="q_a1poV0XZRipHzOlyn--1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--3" value="Parser--&amp;gt;AST" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="100" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--4" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="342" y="162.5" width="20" height="257.5" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--6" value="分析with 语句" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="376" y="150" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--7" value="rewrite join语句" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="376" y="200" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--8" value="with 语句" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="376" y="250" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.55;entryY=0.004;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--9" target="q_a1poV0XZRipHzOlyn--14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--9" value="rewrite 表达式" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="376" y="300" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--10" value="索引优化" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="376" y="350" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--11" value="......." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="376" y="400" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--14" value="in subquery的处理" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="532" y="106.25" width="250" height="153.75" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--17" value="会将替换所有的subquery成一个表的别名。&lt;br&gt;在生成别名的时候会调用&lt;br&gt;getDataPartsVector()&lt;br&gt;会去MetaStore获取到所有的parts信息&lt;br&gt;并保存在对应的storage里。" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="q_a1poV0XZRipHzOlyn--14">
          <mxGeometry x="-2.5" y="43.75" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--22" target="q_a1poV0XZRipHzOlyn--26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--22" target="q_a1poV0XZRipHzOlyn--32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--22" value="getSampleBlock" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="470" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--23" value="获取结果的数据格式&lt;br&gt;（在生成分析结果的时候会生成对应优化中间结果，例如表达式中Const值的索引信息）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="22" y="430" width="165" height="70" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--26" value="In const value set" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="362" y="445" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--27" value="Column ------&amp;gt; Const list" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="q_a1poV0XZRipHzOlyn--26">
          <mxGeometry x="30" y="40" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--31" target="q_a1poV0XZRipHzOlyn--33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--31" value="execute()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="585" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--32" target="q_a1poV0XZRipHzOlyn--31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--32" value="...." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="530" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--33" target="q_a1poV0XZRipHzOlyn--34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--33" value="buildQueryPlan" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="640" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--34" target="q_a1poV0XZRipHzOlyn--37">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="352" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--34" target="q_a1poV0XZRipHzOlyn--35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--34" value="storage-&amp;gt;read()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="690" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--35">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="242" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--35" value="executeQuery()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="197" y="740" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;curved=1;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--37" target="q_a1poV0XZRipHzOlyn--45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--37" value="Read" style="swimlane;" vertex="1" parent="1">
          <mxGeometry x="383" y="560" width="260" height="120" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--38" value="去MetaStore获取Parts信息&lt;br&gt;用之前得到的set信息进行判断过滤" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="q_a1poV0XZRipHzOlyn--37">
          <mxGeometry x="24" y="30" width="216" height="60" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--45" value="MetaStore" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="662" y="365" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="q_a1poV0XZRipHzOlyn--46" value="" style="curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="q_a1poV0XZRipHzOlyn--14" target="q_a1poV0XZRipHzOlyn--45">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="382" y="440" as="sourcePoint" />
            <mxPoint x="432" y="390" as="targetPoint" />
            <Array as="points">
              <mxPoint x="752" y="310" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="vckY_sULUmEFBIHILlmd" name="Page-2">
    <mxGraphModel dx="1426" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="SquW65TJM6NZMT_98yej-0" />
        <mxCell id="SquW65TJM6NZMT_98yej-1" parent="SquW65TJM6NZMT_98yej-0" />
        <mxCell id="SquW65TJM6NZMT_98yej-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-3" target="SquW65TJM6NZMT_98yej-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-3" value="SQL" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="50" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-5" target="SquW65TJM6NZMT_98yej-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-5" value="通过工厂类:&lt;br&gt;InterpreterFactory构造&lt;br&gt;InterpreterSelectQuery" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="172" y="150" width="140" height="50" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.1;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-8" target="SquW65TJM6NZMT_98yej-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-8" target="SquW65TJM6NZMT_98yej-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-8" value="Optimize" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="276.25" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-10" target="SquW65TJM6NZMT_98yej-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-10" value="Parser--&amp;gt;AST" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="100" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-11" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="342" y="162.5" width="20" height="257.5" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-12" value="分析with 语句" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="376" y="150" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-13" value="rewrite join语句" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="376" y="200" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-14" value="with 语句" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="376" y="250" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.55;entryY=0.004;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-16" target="SquW65TJM6NZMT_98yej-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-16" value="rewrite 表达式" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="376" y="300" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-17" value="索引优化" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="376" y="350" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-18" value="......." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="376" y="400" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-19" value="in subquery的处理" style="swimlane;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="532" y="106.25" width="250" height="153.75" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-20" value="会将替换所有的subquery成一个表的别名。&lt;br&gt;&lt;strike&gt;&lt;font color=&quot;#ff3333&quot;&gt;在生成别名的时候会调用&lt;/font&gt;&lt;/strike&gt;&lt;br&gt;&lt;strike&gt;&lt;font color=&quot;#ff3333&quot;&gt;getDataPartsVector()&lt;br&gt;会去MetaStore获取到所有的parts信息&lt;br&gt;并保存在对应的storage里。&lt;/font&gt;&lt;/strike&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="SquW65TJM6NZMT_98yej-19">
          <mxGeometry x="5" y="28.75" width="240" height="80" as="geometry" />
        </mxCell>
        <mxCell id="PHHDB1Ytfu1IO_tnj_2O-0" value="&lt;b&gt;&lt;i&gt;✔️将子查询的完整语法树保留到一个集合里。&lt;/i&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#FF3333;" vertex="1" parent="SquW65TJM6NZMT_98yej-19">
          <mxGeometry x="18" y="108.75" width="212" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-23" target="SquW65TJM6NZMT_98yej-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-23" target="SquW65TJM6NZMT_98yej-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-23" value="getSampleBlock" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="470" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-24" value="In const value set" style="swimlane;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="362" y="445" width="200" height="105" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-25" value="Column ------&amp;gt; Const list" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" vertex="1" parent="SquW65TJM6NZMT_98yej-24">
          <mxGeometry x="30" y="30" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="PHHDB1Ytfu1IO_tnj_2O-1" value="遍历所有的子查询树。分析其中所有的where表达式，提取出Const Value条件。" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#FF3333;" vertex="1" parent="SquW65TJM6NZMT_98yej-24">
          <mxGeometry x="9" y="57" width="182" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-27" target="SquW65TJM6NZMT_98yej-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-27" value="execute()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="585" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-29" target="SquW65TJM6NZMT_98yej-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-29" value="...." style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="530" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-31" target="SquW65TJM6NZMT_98yej-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-31" value="buildQueryPlan" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="640" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-34" target="SquW65TJM6NZMT_98yej-38">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="352" y="640" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-34" target="SquW65TJM6NZMT_98yej-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-34" value="storage-&amp;gt;read()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="690" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-36">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="242" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-36" value="executeQuery()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="197" y="740" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;curved=1;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-38" target="SquW65TJM6NZMT_98yej-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-38" value="Read" style="swimlane;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="383" y="560" width="260" height="130" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-39" value="去MetaStore获取Parts信息&lt;br&gt;用之前得到的set信息进行判断过滤" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="SquW65TJM6NZMT_98yej-38">
          <mxGeometry x="22" y="20" width="216" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6vI7quJhCoN0WwSABIjj-1" value="&lt;font color=&quot;#ff3333&quot;&gt;遍历所有的子表的storage getPart逻辑。&lt;br&gt;用之前的pruning逻辑获取parts信息，保存在子表中&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="SquW65TJM6NZMT_98yej-38">
          <mxGeometry x="20" y="60" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-40" value="MetaStore" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="662" y="365" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SquW65TJM6NZMT_98yej-41" value="" style="curved=1;endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="SquW65TJM6NZMT_98yej-1" source="SquW65TJM6NZMT_98yej-19" target="SquW65TJM6NZMT_98yej-40">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="382" y="440" as="sourcePoint" />
            <mxPoint x="432" y="390" as="targetPoint" />
            <Array as="points">
              <mxPoint x="752" y="310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6vI7quJhCoN0WwSABIjj-0" value="获取结果的数据格式&lt;br&gt;（在生成分析结果的时候会生成对应优化中间结果，例如表达式中Const值的索引信息）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="22" y="450" width="165" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6vI7quJhCoN0WwSABIjj-2" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.x;fontColor=#FF3333;strokeColor=#FF3333;fillColor=#FF3333;" vertex="1" parent="SquW65TJM6NZMT_98yej-1">
          <mxGeometry x="703" y="300" width="30" height="23.75" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
